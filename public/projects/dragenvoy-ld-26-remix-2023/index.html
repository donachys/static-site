<!DOCTYPE HTML>

<html><head>
    <title>SD</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <link rel="stylesheet" href="https://shaundonachy.com/assets/css/main.css" />
    
    </head>
<body class="homepage">
	<div id="page-wrapper">

		
		<div id="header-wrapper">
			<div id="header">

				
<h1><a href="https://shaundonachy.com/">SD</a></h1>
				
<nav id="nav">
    <ul>
        <li class="current"><a href="https://shaundonachy.com/">Home</a></li>
        <li>
            <a href="https://shaundonachy.com/#projects">Projects</a>
        </li>
        <li>
            <a href="https://shaundonachy.com/blog">Blog</a>
            <ul>
                <li><a href="https://shaundonachy.com/blog/glampire-baby-herder/">Glampire Baby Herder!</a></li>
                <li><a href="https://shaundonachy.com/blog/bebops-breakout/">Bebop&#39;s Breakout!</a></li>
                <li><a href="https://shaundonachy.com/blog/static-site-with-hugo/">Static Site Generator - Hugo</a></li>
            </ul>
        </li>
        <li><a href="https://shaundonachy.com/#contact">Contact</a></li>
    </ul>
</nav>


			</div>
		</div>

		
		<div id="main-wrapper">
			<div class="container">
				
				
<article class="box post">
    <a href="#" class="image featured"><img src="https://shaundonachy.com/images/dragenvoy_ld26_2023.png" alt="" /></a>
    <header>
        <h2>Dragenvoy - 2023</h2>
        
        <p>Posted 5 Jun 2023</p>
        
    </header>
    <h3 id="10-year-anniversary-edition">10-Year Anniversary Edition!</h3>
<p>Dragenvoy has enjoyed 10 glorious years on the web. üëèüëèüëè Fans of this famous game will recall that it received an <a href="https://shaundonachy.com/projects/dragenvoy-ld-26-remix-2018/">update in 2018</a> to improve browser compatibility. I thought it would be a good time to make an update to the game ten years after I made it for ludum dare 26 and celebrate the closing of my chapter working at Unity that began many years later. For the 10-year anniversary update I simply wanted to improve the dragon&rsquo;s motion to match the original design. While watching luggage being wheeled around at the airport I realized what was causing the dragon body to move more erratically than intended. The solution, I thought, was to add some wheels to each body segment. I noticed that Unity had added some wheel physics components for both 3d and 2d games, but I found those components not to be compatible. The wheel-based approach to solving the issue did lead me to the right search query, though! Incredibly a post on a stack overflow site from more than 11 years ago gave me the clues I needed with some sample code. Essentially I just needed to prevent the body segments from having any orthogonal velocity üíÄ.</p>
<h4 id="the-method">The Method</h4>
<p>This was pretty much the entirety of the changes.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> dampenOrthogonalVelocity(GameObject vehicle, <span style="color:#66d9ef">float</span> drift = <span style="color:#ae81ff">0f</span>, <span style="color:#66d9ef">float</span> maxDrift = <span style="color:#ae81ff">0f</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Rigidbody2D temprb2D = vehicle.GetComponent&lt;Rigidbody2D&gt; () <span style="color:#66d9ef">as</span> Rigidbody2D;
</span></span><span style="display:flex;"><span>	Vector2 forwardVelocity = vehicle.transform.up * Vector2.Dot(temprb2D.velocity, vehicle.transform.up);
</span></span><span style="display:flex;"><span>	Vector2 rightVelocity = vehicle.transform.right * Vector2.Dot(temprb2D.velocity, vehicle.transform.right);
</span></span><span style="display:flex;"><span>	temprb2D.velocity = forwardVelocity + Vector2.ClampMagnitude(rightVelocity * drift, maxDrift);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>In order to retain the physics simulation aspect of the dragon&rsquo;s movement we don&rsquo;t want to entirely remove orthogonal velocity, but just dampen it while also clamping it to a maximum value. Applying this to each of the body segments results in the dragon body movement following the head&rsquo;s path more closely, while still allowing some side-to-side motion that occasionally results in the pellets being smacked around the play area.</p>
<h3 id="wassup-wasm">Wassup WASM</h3>
<p>Updating the project to Unity v2021.1.4f1 and building for the Web target results in different files than either of the prior versions. This time web assembly is used! Pretty cool to see this technology in use. Upgrading this admittedly basic game project has not been too difficult and its interesting to see that even though it is built and executed each time with different technologies the result remains pretty much the same!</p>
<h3 id="try-it">Try it</h3>
<p>Here is the link to <a href="https://shaundonachy.com/dragenvoy2023/index.html">Dragenvoy - 2023</a>.</p>

</article>

				
			</div>
		</div>

		
<div id="footer-wrapper">
    <section id="footer" class="container">
        <div id="contact" class="row">
            <div class="8u 12u(mobile)">
    <section>
        
        <header>
            <h2>Recent Posts</h2>
        </header>
        
        <ul class="dates">
            
            <li>
                <span class="date">May <strong> 1</strong></span>
                <h3><a href="https://shaundonachy.com/blog/glampire-baby-herder/">Glampire Baby Herder!</a></h3>
                <p>Ludum Dare 44 Compo Entry</p>
            </li>
            
            <li>
                <span class="date">Apr <strong>23</strong></span>
                <h3><a href="https://shaundonachy.com/blog/bebops-breakout/">Bebop&#39;s Breakout!</a></h3>
                <p>Ludum Dare 41 Compo Entry</p>
            </li>
            
            <li>
                <span class="date">Apr <strong> 7</strong></span>
                <h3><a href="https://shaundonachy.com/blog/static-site-with-hugo/">Static Site Generator - Hugo</a></h3>
                <p>My experience so far with Hugo!</p>
            </li>
            
        </ul>
    </section>
</div>
            <div class="4u 12u(mobile)">
                <section>
                    <header>
                        <h2>Get in touch</h2>
                    </header>
                    <ul class="about">
    
        <p>I enjoy crafting new tools and tech, games, and enriching lives. In addition to software I like to practice leatherworking.</p>
    
</ul>
                    <ul class="social">
    <li><a class="icon fa-linkedin" href="https://www.linkedin.com/in/donachys"><span class="label">LinkedIn</span></a></li>
    
    <li><a class="icon fa-github" href="https://github.com/donachys"><span class="label">GitHub</span></a></li>
    
    
    <li><a class="icon fa-gitlab" href="https://gitlab.com/donachys"><span class="label">GitLab</span></a></li>
    
    
</ul>

                    <ul class="contact">
    
    <li>
        <h3>Mail</h3>
        <p><a href="mailto:shaun@donachy.me">shaun@donachy.me</a></p>
    </li>
    
    
    <li>
        <h3>Address</h3>
        <p>
            
             Seattle, WA
            
        </p>
    </li>
    
    
    <li>
        <h3>Mail</h3>
        <p><a href="mailto:shaun@donachy.me">shaun@donachy.me</a></p>
    </li>
    
    
</ul>

                </section>
            </div>
        </div>
        <div class="row">
    <div class="12u">

        
            <div id="copyright">
                <ul class="links">
                    <li>&copy; SD. All rights reserved.</li>
                </ul>
            </div>

    </div>
</div>

    </section>
</div>

	</div>

	
<script src="https://shaundonachy.com/assets/js/jquery.min.js"></script>
<script src="https://shaundonachy.com/assets/js/jquery.dropotron.min.js"></script>
<script src="https://shaundonachy.com/assets/js/skel.min.js"></script>
<script src="https://shaundonachy.com/assets/js/skel-viewport.min.js"></script>
<script src="https://shaundonachy.com/assets/js/util.js"></script>

<script src="https://shaundonachy.com/assets/js/main.js"></script>

    
    <script src="https://shaundonachy.com/assets/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>





    </body>
</html>