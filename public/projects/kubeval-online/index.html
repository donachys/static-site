<!DOCTYPE HTML>

<html><head>
    <title>SD</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <link rel="stylesheet" href="http://notlocalhost/assets/css/main.css" />
    
    </head>
<body class="homepage">
	<div id="page-wrapper">

		
		<div id="header-wrapper">
			<div id="header">

				
<h1><a href="http://notlocalhost/">SD</a></h1>
				
<nav id="nav">
    <ul>
        <li class="current"><a href="http://notlocalhost/">Home</a></li>
        <li>
            <a href="http://notlocalhost/#projects">Projects</a>
        </li>
        <li>
            <a href="http://notlocalhost/blog">Blog</a>
            <ul>
                <li><a href="http://notlocalhost/blog/glampire-baby-herder/">Glampire Baby Herder!</a></li>
                <li><a href="http://notlocalhost/blog/bebops-breakout/">Bebop&#39;s Breakout!</a></li>
                <li><a href="http://notlocalhost/blog/static-site-with-hugo/">Static Site Generator - Hugo</a></li>
            </ul>
        </li>
        <li><a href="http://notlocalhost/#contact">Contact</a></li>
    </ul>
</nav>


			</div>
		</div>

		
		<div id="main-wrapper">
			<div class="container">
				
				
<article class="box post">
    <a href="#" class="image featured"><img src="http://notlocalhost/images/kubeval_online.png" alt="" /></a>
    <header>
        <h2>Kubeval Online</h2>
        
        <p>Posted 5 Jan 2018</p>
        
    </header>
    <h3 id="validate-kubernetes-k8s-yaml-files-online">Validate Kubernetes (k8s) yaml files online.</h3>
<p>This project was inspired by and based on <a href="https://github.com/garethr/kubeval">garethr&rsquo;s kubeval</a>. After attending his talk at Kubecon in December 2017 I put this together to make use of kubeval to perform validations by pasting into a web interface. Garethr&rsquo;s kubeval already has a nice CLI you can use as part of a CI/CD system, and kubevalonline supplements this tool for use during the development process.</p>
<p>Given a kubernetes configuration file with an invalid value such as:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">apiVersion:</span> <span style="color:#960050;background-color:#1e0010">v</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">kind:</span> <span style="color:#960050;background-color:#1e0010">Service</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">metadata:</span>
</span></span><span style="display:flex;"><span>  <span style="color:#960050;background-color:#1e0010">name:</span> <span style="color:#960050;background-color:#1e0010">redis-master</span>
</span></span><span style="display:flex;"><span>  <span style="color:#960050;background-color:#1e0010">labels:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">app:</span> <span style="color:#960050;background-color:#1e0010">redis</span>
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">tier:</span> <span style="color:#960050;background-color:#1e0010">backend</span>
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">role:</span> <span style="color:#960050;background-color:#1e0010">master</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">spec:</span>
</span></span><span style="display:flex;"><span>  <span style="color:#960050;background-color:#1e0010">ports:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">port</span> <span style="color:#960050;background-color:#1e0010">that</span> <span style="color:#960050;background-color:#1e0010">this</span> <span style="color:#960050;background-color:#1e0010">service</span> <span style="color:#960050;background-color:#1e0010">should</span> <span style="color:#960050;background-color:#1e0010">serve</span> <span style="color:#960050;background-color:#1e0010">on</span>
</span></span><span style="display:flex;"><span>  <span style="color:#960050;background-color:#1e0010">-</span> <span style="color:#960050;background-color:#1e0010">port:</span> <span style="color:#960050;background-color:#1e0010">sds</span>
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">targetPort:</span> <span style="color:#ae81ff">6379</span>
</span></span><span style="display:flex;"><span>  <span style="color:#960050;background-color:#1e0010">selector:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">app:</span> <span style="color:#960050;background-color:#1e0010">redis</span>
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">tier:</span> <span style="color:#960050;background-color:#1e0010">backend</span>
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">role:</span> <span style="color:#960050;background-color:#1e0010">master</span>
</span></span></code></pre></div><p>kubeval recognizes that port values should be integer type and not string type then responds with an error:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;Results&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;Kind&#34;</span>: <span style="color:#e6db74">&#34;Service&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;Success&#34;</span>: <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;Errors&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;Invalid type. Expected: integer, given: string&#34;</span>
</span></span><span style="display:flex;"><span>      ]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>kubectl run</code> provides a <code>--dry-run</code> flag which can also be used to partially verify that a declaration is valid, but kubeval provides additional information that is valuable when debugging. A handy tool for the kubernaut!</p>
<p>The source code is hosted on <a href="https://github.com/donachys/kubevalonline">github</a>. The image can be pulled from <a href="https://hub.docker.com/r/donachys/kubevalonline/">dockerhub</a>.</p>
<p><a href="https://travis-ci.org/donachys/kubevalonline">Travis CI</a> and <a href="https://coveralls.io/github/donachys/kubevalonline?branch=master">coveralls</a> handle the build and code coverage.
<a href="https://travis-ci.org/donachys/kubevalonline"><img src="https://travis-ci.org/donachys/kubevalonline.svg?branch=master" alt="Build Status"></a> <a href="https://coveralls.io/github/donachys/kubevalonline?branch=master"><img src="https://coveralls.io/repos/github/donachys/kubevalonline/badge.svg?branch=master" alt="Coverage Status"></a></p>

</article>

				
			</div>
		</div>

		
<div id="footer-wrapper">
    <section id="footer" class="container">
        <div id="contact" class="row">
            <div class="8u 12u(mobile)">
    <section>
        
        <header>
            <h2>Recent Posts</h2>
        </header>
        
        <ul class="dates">
            
            <li>
                <span class="date">May <strong> 1</strong></span>
                <h3><a href="http://notlocalhost/blog/glampire-baby-herder/">Glampire Baby Herder!</a></h3>
                <p>Ludum Dare 44 Compo Entry</p>
            </li>
            
            <li>
                <span class="date">Apr <strong>23</strong></span>
                <h3><a href="http://notlocalhost/blog/bebops-breakout/">Bebop&#39;s Breakout!</a></h3>
                <p>Ludum Dare 41 Compo Entry</p>
            </li>
            
            <li>
                <span class="date">Apr <strong> 7</strong></span>
                <h3><a href="http://notlocalhost/blog/static-site-with-hugo/">Static Site Generator - Hugo</a></h3>
                <p>My experience so far with Hugo!</p>
            </li>
            
        </ul>
    </section>
</div>
            <div class="4u 12u(mobile)">
                <section>
                    <header>
                        <h2>Get in touch</h2>
                    </header>
                    <ul class="about">
    
        <p>I enjoy crafting new tools and tech, games, and enriching lives. In addition to software I like to practice leatherworking.</p>
    
</ul>
                    <ul class="social">
    <li><a class="icon fa-linkedin" href="https://www.linkedin.com/in/donachys"><span class="label">LinkedIn</span></a></li>
    
    <li><a class="icon fa-github" href="https://github.com/donachys"><span class="label">GitHub</span></a></li>
    
    
    <li><a class="icon fa-gitlab" href="https://gitlab.com/donachys"><span class="label">GitLab</span></a></li>
    
    
</ul>

                    <ul class="contact">
    
    <li>
        <h3>Mail</h3>
        <p><a href="mailto:shaun@donachy.me">shaun@donachy.me</a></p>
    </li>
    
    
    <li>
        <h3>Address</h3>
        <p>
            
             Seattle, WA
            
        </p>
    </li>
    
    
    <li>
        <h3>Mail</h3>
        <p><a href="mailto:shaun@donachy.me">shaun@donachy.me</a></p>
    </li>
    
    
</ul>

                </section>
            </div>
        </div>
        <div class="row">
    <div class="12u">

        
            <div id="copyright">
                <ul class="links">
                    <li>&copy; SD. All rights reserved.</li>
                </ul>
            </div>

    </div>
</div>

    </section>
</div>

	</div>

	
<script src="http://notlocalhost/assets/js/jquery.min.js"></script>
<script src="http://notlocalhost/assets/js/jquery.dropotron.min.js"></script>
<script src="http://notlocalhost/assets/js/skel.min.js"></script>
<script src="http://notlocalhost/assets/js/skel-viewport.min.js"></script>
<script src="http://notlocalhost/assets/js/util.js"></script>

<script src="http://notlocalhost/assets/js/main.js"></script>

    
    <script src="http://notlocalhost/assets/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>





    </body>
</html>